<!DOCTYPE html>
<html>
<head>
    <title>snake</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script>
        window.addEventListener("load", start, false);
        function start() {
            var boardSize = 27;
            var board = [boardSize];
            var head;
            var body = [];
            var bodyLength = 4;
            var headPosition;
            var blockedMove;
            var snakeSpeed = 100;

            var blockSize = 40;

            var headImage = "url('images/headDown.jpg')";

            var xPos;
            var yPos;

            for (var i = 0; i < boardSize; i++) {
                board[i] = [];
            }

            for (var i = 0; i < boardSize; i++) {
                for (var j = 0; j < boardSize; j++) {
                    board[i][j] = 0;
                    var field = document.createElement("div");

                    field.style.width = blockSize + "px";
                    field.style.height = blockSize + "px";
                    field.setAttribute("id", i + "-" + j);
                    field.style.position = "absolute";
                    field.style.left = j * blockSize + "px";
                    field.style.top = i * blockSize + "px";
                    field.style.border = 1 + "px";
                    field.innerHTML = 0;
                    field.style.backgroundImage = "url('images/grass.jpg')";
                    field.style.fontSize = 0;
                    if (i == 0 || j == 0 || j == boardSize - 1 || i == boardSize - 1) {
                        field.style.backgroundImage = "url('images/wall.jpg')";
                       // field.style.background = "#332323";
                        field.innerHTML = 4;
                        field.style.fontSize = 0;
                    }

                    document.body.appendChild(field);
                }

            }

            MakeGame();
            
            function MakeGame()
            {
                
                bodyLength = 4;
               
          
                head = parseInt(boardSize / 2) + "" + parseInt(boardSize / 2);
                xPos = parseInt(boardSize / 2);
                yPos = parseInt(boardSize / 2);

                document.getElementById(xPos + "-" + xPos).innerHTML = 1;
                document.getElementById(xPos + "-" + xPos).style.backgroundImage  = headImage;
                //document.getElementById(xPos + "-" + xPos).style.background = "blue";

                body[0] = parseInt(boardSize / 2) + "-" + parseInt(boardSize / 2);
                headPosition = 0;
                

                MakeFood();
            }

            
            function makeBody() {
                
                if (xPos == 0 || yPos == 0 || xPos == boardSize - 1 || yPos == boardSize - 1 || document.getElementById(xPos + "-" + yPos).innerHTML == 2)
                {
                    alert("GG");                    
                   
                    clearInterval(move);                    
                    ClearBoard();
                    MakeGame();
                }

                else
                {
                    if (document.getElementById(xPos + "-" + yPos).innerHTML == 3) {
                        bodyLength++;
                        MakeFood();
                    }

                    headPosition++;
                    body[headPosition] = xPos + "-" + yPos;
                    var bodyPart = document.getElementById(xPos + "-" + yPos)
                    bodyPart.innerHTML = 1;
                    bodyPart.style.backgroundImage = headImage;
                    bodyPart.style.fontSize = 0;

                    for (var i = headPosition - 1; i > headPosition - bodyLength; i--) {

                        
                        nextPos = body[i].split('-');
                       
                        nextX = nextPos[0];
                        nextY = nextPos[1];
                        var GotoNext = document.getElementById(nextX + "-" + nextY)
                        GotoNext.innerHTML = 2;
                        GotoNext.style.backgroundImage = "url('images/body.jpg')";
                        GotoNext.style.fontSize = 0;

                        currentPos = body[i - 1].split('-');

                        currentX = currentPos[0];
                        currentY = currentPos[1];
                        
                        var clearCodyPart = document.getElementById(currentX + "-" + currentY)
                        clearCodyPart.innerHTML = 0;
                        clearCodyPart.style.backgroundImage = "url('images/grass.jpg')";
                        clearCodyPart.style.fontSize = 0;

                    }
                    var spawn = true;
                    for (var i = 1; i < boardSize; i++) {
                        for (var j = 1; j < boardSize; j++) {
                            if (document.getElementById(i + "-" + j).innerHTML == 3)
                                spawn = false;
                        }
                    }
                    if (spawn)
                        MakeFood();
                }
                

            }

            var move;
            window.addEventListener("keypress", press, false);

            function press(e)
            {

                

                if (e.keyCode == 119 && e.keyCode != blockedMove) { 
                    clearInterval(move);
                    headImage = "url('images/headUp.jpg')";
                    move = setInterval(function () {
                        xPos--;
                        makeBody();
                        blockedMove = 115;
                    }, snakeSpeed)
                    
                    
                }
                else if (e.keyCode == 115 && e.keyCode != blockedMove) { 
                    clearInterval(move);
                    headImage = "url('images/headDown.jpg')";
                    move = setInterval(function () {
                        xPos++;
                        makeBody();
                        blockedMove = 119;
                    }, snakeSpeed)
                    
                }
                else if (e.keyCode == 100 && e.keyCode != blockedMove) { 
                    clearInterval(move);
                    headImage = "url('images/headRight.jpg')";
                    move = setInterval(function () {
                        yPos++;
                        makeBody();
                        blockedMove = 97;
                    }, snakeSpeed)

                   
                }
                else if (e.keyCode == 97 && e.keyCode != blockedMove) { 
                    clearInterval(move);
                    headImage = "url('images/headLeft.jpg')";
                    move = setInterval(function () {
                        
                        yPos--;
                        makeBody();
                        blockedMove = 100;
                    }, snakeSpeed)

                    
                }

            }

            function MakeFood()
            {
                var foodPositionX = parseInt(Math.random() * (boardSize-2) + 1);
                var foodPositionY = parseInt(Math.random() * (boardSize - 2) + 1);              

                if (document.getElementById(foodPositionX + "-" + foodPositionY).innerHTML == 0)
                {
                    var food = document.getElementById(foodPositionX + "-" + foodPositionY);
                    food.innerHTML = 3;
                    food.style.backgroundImage = "url('images/cherry.jpg')";
                    food.style.fontSize = 0;
                }
                else
                {
                    MakeFood();
                }
                    
            }

            function ClearBoard()
            {
                for(var i = 0;i<boardSize;i++)
                {
                    for(var j = 0 ;j<boardSize;j++)
                    {
                        if (document.getElementById(i + "-" + j).innerHTML == 1 || document.getElementById(i + "-" + j).innerHTML == 2 || document.getElementById(i + "-" + j).innerHTML == 3)
                        {
                            document.getElementById(i + "-" + j).innerHTML = 0;
                            document.getElementById(i + "-" + j).style.backgroundImage = "url('images/grass.jpg')";
                            document.getElementById(i + "-" + j).style.fontSize = 0;
                        }
                    }
                }
            }

        }
    </script>
</head>
<body >
</body>
</html>